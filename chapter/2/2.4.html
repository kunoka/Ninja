<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Test Suit</title>
    <script>

        function assert(value, desc){
            var li = document.createElement("li");
            li.className = value ? "pass" : "fail";
            li.appendChild(document.createTextNode(desc));
            document.getElementById("results").appendChild(li);
        }
        window.onload = function load(){
            assert(true, "the test suite is running");
            assert(false, "Fail");
        };
//        var load  = function(name) {
//            alert(name);
//        };

        function load() {
            var abc = new Function("x","y","return x*y;");
            alert(abc(2,3)); // "6"
        }
        function closure(){
            var abc=function(y){
            var x=y;// 这个是局部变量
            return function(){
                alert(x++);// 就是这里调用了闭包特性中的一级函数局部变量的x，并对它进行操作
                alert(y--);// 引用的参数变量也是自由变量
            }}(5);// 初始化
            abc();// "5" "5"
            abc();// "6" "4"
            abc();// "7" "3"
            alert(x);// 报错！“x”未定义！
        }

            (function(x, y){
                alert(x + y);
            })(2, 3);
        function checkClosure(){
            var str = 'rain-man';
            setTimeout(
                    function(){ alert(str); } //这是一个匿名函数
                    , 2000);
        }
    </script>
    <style>
        #results li.pass {color:green;}
        #results li.fail {color:red;}
    </style>
</head>
<body>
    <!--<ul id="results" onclick="load()"></ul>-->
    <!--<ul id="results" onclick="closure()"></ul>-->
    <ul id="results" onclick="checkClosure()"></ul>
</body>
</html>